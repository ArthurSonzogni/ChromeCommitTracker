import{r as v}from"./CTRyl4Lp.js";import{g as B,m as S,h as q,i as p,r as b,o as u,c as V,a as c,F as h,k as A,x as n,j as w,w as _,d as y,t as L,z as g,y as x,p as F,e as N}from"./BYXYRwLn.js";import{_ as U}from"./DlAUqK2U.js";const R=l=>(F("data-v-d213e237"),l=l(),N(),l),$={class:"columns"},j={class:"fields column"},D=R(()=>c("div",{class:"spacer"},null,-1)),E={class:"column is-narrow"},O=B({__name:"RepositorySelector",props:S({filter:{type:Function,required:!1,default:()=>!0},allowMultiple:{type:Boolean,required:!1,default:!1},allowAll:{type:Boolean,required:!1,default:!1},size:{type:String,default:"is-small",required:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const a=q(l,"modelValue"),C=l,r=p(v),f=p(v.map(t=>t.dirname)),i=p(a.value.length>1),o=p(a.value.length==f.value.filter(t=>{for(const e of v)if(e.dirname.toLowerCase()===t)return e.parent==null;return!1}).length),I=async()=>{if(o.value=!o.value,!o.value){a.value=[];return}i.value=C.allowMultiple.value;const t=f.value.map(e=>e.toLowerCase()).filter(e=>{for(const s of r.value)if(s.dirname.toLowerCase()===e)return s.parent==null;return!1});a.value=t};function M(t){if(o.value=!1,!i.value){a.value=[t];return}const e=[...a.value],s=e.indexOf(t);s===-1?e.push(t):e.splice(s,1),a.value=e.sort()}return(t,e)=>{const s=b("b-checkbox-button"),k=b("b-checkbox");return u(),V("div",$,[c("div",j,[(u(!0),V(h,null,A(n(f),(d,m)=>(u(),V(h,{key:m},[l.filter(n(r)[m])?(u(),w(s,{key:0,style:{"margin-right":"-0.02rem","margin-left":"0"},name:"repositories",size:l.size,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=z=>a.value=z),"native-value":n(r)[m].dirname,onInput:z=>M(n(r)[m].dirname)},{default:_(()=>[y(L(n(r)[m].name),1)]),_:2},1032,["size","modelValue","native-value","onInput"])):g("",!0)],64))),128)),D]),c("div",E,[c("div",null,[l.allowAll?(u(),w(k,{key:0,size:l.size,name:"all",type:"is-warning",modelValue:n(o),"onUpdate:modelValue":e[1]||(e[1]=d=>x(o)?o.value=d:null),onInput:e[2]||(e[2]=d=>I())},{default:_(()=>[y(" All ")]),_:1},8,["size","modelValue"])):g("",!0)]),c("div",null,[l.allowMultiple?(u(),w(k,{key:0,size:l.size,name:"multiple",modelValue:n(i),"onUpdate:modelValue":e[3]||(e[3]=d=>x(i)?i.value=d:null)},{default:_(()=>[y(" Multiple ")]),_:1},8,["size","modelValue"])):g("",!0)])])])}}}),J=U(O,[["__scopeId","data-v-d213e237"]]);export{J as _};
