import{_ as X}from"./BgwZxOQs.js";import{_ as Y}from"./Dr1fThoD.js";import{g as F,m as H,h as Z,i as O,v as G,r as M,o as A,c as R,a as y,b as u,w as r,d as m,F as ee,k as oe,j as q,x as d,z as N,t as te,y as _,X as T,p as J,e as P,C as E,q as ne,s as Q,l as ae,n as le}from"./BYXYRwLn.js";import{_ as K}from"./DlAUqK2U.js";import{_ as se}from"./B2tdp_o7.js";import{_ as ie}from"./DvQWrZbw.js";import{r as re}from"./CTRyl4Lp.js";import{f as j}from"./D2nGpDRe.js";import{_ as ue}from"./C2qxPpFt.js";import"./nBtS1XGq.js";import"./D7zcYHcO.js";import"./BxPoHLz2.js";const L=["ACM","AMD","ANL","ARM","Accenture","Access Digital","Adobe","Akamai","Alibaba","Alif Type","Amazon","Andes","Antmicro","Apple","Arntzen Software","Autodesk","Azul","BDTi","BEC","BlackBerry","Blackberry","Bloomberg","Brave","Broadcom","ByteDance","CERN","Canonical","Chinese Academy of Sciences","Cisco","Cloudflare","Codeplay","Collabora","Colorado school of Mines","Cornell university","Debian","Dell","Digia","Dolby","ENS Lyon","ENS Rennes","Epitech","Ericsson","Foxit","FreeBSD","Front Range Internet","GNU","Gentoo","Getdesigned","Gnome","Google","GraphCore","Harvard","Huawei","Hyperconnect","IBM","Igalia","Imagination","Individuals","Intel","Jetbrains","KDE","Khronos","LGE","LLVM","Ladybird","Linaro","Linux Foundation","Linux Kernel","Logitech","Loongson","LowRISK","LunarG","MIPS","MediaTek","Meta","Metrix Constultants","Microchip","Microsoft","Mobica","Modular","Moritz Systems","Motorola","Mozilla","NEC","NYU","Narod","Naver","Netflix","NextSilicon","Nokia","Northeastern University","Nuanti","Nvidia","Octopus Computing","Opera","Polymage Labs","Purdue University","Qiaxin","Qt","Qualcom","Qualcomm","Qualcoom","RT-RK","Redhat","Rivos","Rutgers","Rwthaachen University","SAP","SAS","SN Systems","Saarland Informatics Campus","Salesforce","Samsung","Shopify","SiFive","Sigma technology","Slack","Sony","St Petersburg State University","Suse","Swansea University","Synopsys","Szeged","Tencent","TensorFlow","Técnico LISBOA","UC Santa Barbara","Uber","Ubisoft","University of Illinois","University of Tenessee","University of Washington","University of Wisconsin","Universität Passau","Unknown","Valve","Vewd","Vivaldi","Wacom","WebKit","Windfall","X","XMOS","Xiaomi","Yandex","Zilliqa"],de=g=>(J("data-v-16f8b15d"),g=g(),P(),g),ce={class:"columns"},me={class:"fields column"},pe=de(()=>y("div",{class:"spacer"},null,-1)),fe={class:"column is-narrow"},ve=F({__name:"OrganizationsSelector",props:H({allowMultiple:{type:Boolean,required:!1,default:!1},allowAll:{type:Boolean,required:!1,default:!1},size:{default:"is-small",type:String,required:!0},label:{default:"",type:String,required:!1},repositories:{type:Array[String],required:!1,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const s=g,x=Z(g,"modelValue"),V=O(structuredClone(L)),w=O(x.value.length>1&&s.allowMultiple),p=O(x.value.length==V.value.length),S=O(["adobe","amazon","apple","facebook","google","microsoft","netflix","opera","redhat","slack"]),b=async()=>{const f=await(await fetch("/data/organizations_summary.json")).json(),z={};for(const U of V.value){z[U]=0;for(const a of s.repositories)f[a]&&(z[U]+=f[a][U]||0)}V.value.sort((U,a)=>{const $=z[a]-z[U];return $==0?U.localeCompare(a):$})},k=()=>{V.value.sort()},C=()=>{p.value=!p.value,p.value?(w.value=s.allowMultiple,x.value=L):(w.value=!1,x.value=[])},D=h=>{if(!w.value){x.value=[h];return}const f=[...x.value],z=f.indexOf(h);z===-1?f.push(h):f.splice(z,1),x.value=f.sort()};return G(()=>{b()}),(h,f)=>{const z=M("b-icon"),U=M("b-checkbox-button"),a=M("b-checkbox");return A(),R("div",null,[y("div",ce,[y("div",me,[y("button",{class:"sort-button",onClick:k},[u(z,{icon:"sort-alphabetical-descending-variant",size:"is-medium"},{default:r(()=>[m(" sort alphabetically")]),_:1})]),y("button",{class:"sort-button",onClick:b},[u(z,{icon:"sort",size:"is-medium"},{default:r(()=>[m(" sort by commits")]),_:1})]),(A(!0),R(ee,null,oe(d(V),($,I)=>(A(),q(U,{style:{"margin-right":"-0.02rem","margin-left":"0"},name:"organizations",key:I,size:g.size,modelValue:x.value,"onUpdate:modelValue":f[0]||(f[0]=B=>x.value=B),onInput:B=>D($),"native-value":$},{default:r(()=>[d(S).includes($.toLowerCase())?(A(),q(z,{key:0,icon:$.toLowerCase(),size:"is-small"},null,8,["icon"])):N("",!0),m(" "+te($),1)]),_:2},1032,["size","modelValue","onInput","native-value"]))),128)),pe]),y("div",fe,[y("div",null,[g.allowAll?(A(),q(a,{key:0,size:g.size,name:"all",value:d(p),onInput:f[1]||(f[1]=$=>C()),type:"is-warning"},{default:r(()=>[m(" All ")]),_:1},8,["size","value"])):N("",!0)]),y("div",null,[g.allowMultiple?(A(),q(a,{key:0,size:g.size,name:"multiple",modelValue:d(w),"onUpdate:modelValue":f[2]||(f[2]=$=>_(w)?w.value=$:null)},{default:r(()=>[m(" Multiple ")]),_:1},8,["size","modelValue"])):N("",!0)]),T(h.$slots,"default",{},void 0,!0)])])])}}}),ye=K(ve,[["__scopeId","data-v-16f8b15d"]]),W=g=>(J("data-v-d3ee019f"),g=g(),P(),g),_e={class:"main"},ge=W(()=>y("p",{class:"m-2"},null,-1)),be={class:"card"},Ve={class:"card-content"},we=W(()=>y("div",{class:"media"},[y("div",{class:"media-content"},[y("p",{class:"title is-4"},"Download as:")])],-1)),he={class:"content"},Se=F({__name:"Organizations",props:{repositories:{type:Array[String],default:()=>["chromium"]},organizations:{type:Array[String],default:()=>["Google"]},colors:{type:String,default:"repositories"},grouping:{type:String,default:"yearly"},kind:{},metric:{},chart:{type:String,default:"bar"},dates:{type:Array[Date],default:()=>[new Date("2000-01-01"),new Date]},others:{type:Boolean,default:!1},percent:{type:Boolean,default:!1}},setup(g){const s=g,x=new Map;for(const t of re)x.set(t.dirname,t.color);const V=new Map;for(const t in L){const e=t*360/L.length+t%4*90,n=40+5*(t%3);V.set(L[t],`hsl(${e}, 99%, ${n}%)`)}V.set("Others","hsl(0, 0%, 50%)");const w=E([]),p=E([]),S=O(!1);let b=j(",d");const k=function(t,e){for(const n in e)t[n]=(t[n]||0)+e[n]},C=function(t){switch(s.grouping){case"forever":return s.dates[0];case"decennial":return new Date(t.substr(0,3)+"0-01-01");case"yearly":return new Date(t.substr(0,4)+"-01-01");case"quarterly":return new Date(t.substr(0,4)+"-"+(1+(parseInt(t.substr(5,1))-1)*3)+"-01");case"monthly":return new Date(t+"-01")}},D=async function(t){const n=await(await fetch(`/data/${t}/organizations_summary_${s.metric}_${s.grouping}_${s.kind}.json`)).json(),l={};l.Others={};for(const o in n){if(s.organizations.includes(o)){l[o]=n[o];continue}(s.colors=="organizations"||s.others)&&k(l.Others,n[o])}for(const o in l)for(const c in l[o]){const v=C(c);(v<s.dates[0]||v>s.dates[1])&&delete l[o][c]}return console.log(l),l},h=async function(){var n,l;const t={};for(const o of s.repositories)t[o]=await D(o);const e={};if(s.colors=="repositories"){for(const o in t)for(const c in t[o])for(const v in t[o][c])e[v]=e[v]||{},(n=e[v])[o]||(n[o]=0),e[v][o]+=t[o][c][v];if(s.percent)for(const o in e){let c=0;for(const v in e[o])c+=e[o][v];for(const v in e[o])e[o][v]/=c}}else{for(const o in t)for(const c in t[o])for(const v in t[o][c])e[v]=e[v]||{},(l=e[v])[c]||(l[c]=0),e[v][c]+=t[o][c][v];if(s.percent)for(const o in e){let c=0;for(const v in e[o])c+=e[o][v];for(const v in e[o])e[o][v]/=c}if(!s.others)for(const o in e)delete e[o].Others}for(const o in e)for(const c in e[o])e[o][c]==0&&delete e[o][c];for(const o in e)Object.keys(e[o]).length==0&&delete e[o];return e},f=async function(){const t=await h();if(b=s.percent?j(".2%"):s.metric=="commit"?e=>j(",d")(e)+" ⚙️":e=>j(",d")(e)+" 🧍",s.chart=="bar"&&(w.value=Object.keys(t).sort().map(e=>({label:e,values:Object.keys(t[e]).sort().map(n=>({label:n,value:t[e][n],color:s.colors=="repositories"?x.get(n):V.get(n)}))}))),s.chart=="line"){const e={};for(const l in t)for(const o in t[l])e[o]=(e[o]||0)+t[l][o];const n=Object.keys(e).sort((l,o)=>e[o]-e[l]).slice(0,10);p.value=n.map(l=>({label:l,values:Object.keys(t).sort().slice(0,-1).map(o=>({x:new Date(C(o)),y:t[o][l]||0}))}))}},z=function(t,e,n){const l=new Blob([t],{type:n||"text/plain"}),o=URL.createObjectURL(l),c=document.createElement("a");c.href=o,c.download=e,c.click(),URL.revokeObjectURL(o)},U=async function(){const t=await h();z(JSON.stringify(t,null,2),"data.json","application/json")},a=async function(){const t=await h(),e={};for(const n in t)for(const l in t[n])e[l]=e[l]||{},e[l][n]=t[n][l];z(JSON.stringify(e,null,2),"data.json","application/json")},$=async function(){const t=await h(),e=Object.keys(t).sort().map(n=>Object.keys(t[n]).sort().map(l=>`${n},${l},${t[n][l]}`).join(`
`)).join(`
`);z(e,"data.csv","text/csv")},I=async function(){const t=await h(),e=new Set;for(const l in t)for(const o in t[l])e.add(o);let n="Date";for(const l of e)n+=`,${l}`;for(const l in t){n+=`
${l}`;for(const o of e)n+=`,${t[l][o]||0}`}z(n,"data.csv","text/csv")},B=ne(()=>{switch(s.grouping){case"forever":return"Forever";case"decennial":return"Decade";case"yearly":return"Year";case"quarterly":return"Quarter";case"monthly":return"Month"}});return Q(s,f),G(()=>{f()}),(t,e)=>{const n=se,l=ie,o=M("b-button"),c=M("b-modal"),v=M("b-field");return A(),R("div",_e,[g.chart=="line"?(A(),q(n,{key:0,class:"line-chart",data:d(p),formatter:d(b)},null,8,["data","formatter"])):N("",!0),g.chart=="bar"?(A(),q(l,{key:1,timeLabel:d(B),formatter:d(b),data:d(w)},null,8,["timeLabel","formatter","data"])):N("",!0),u(v,{position:"is-centered"},{default:r(()=>[T(t.$slots,"default",{},void 0,!0),ge,u(v,{position:"is-centered"},{default:r(()=>[u(o,{onClick:e[0]||(e[0]=i=>S.value=!0)},{default:r(()=>[m(" Download ")]),_:1}),u(c,{modelValue:d(S),"onUpdate:modelValue":e[5]||(e[5]=i=>_(S)?S.value=i:null),width:640},{default:r(()=>[y("div",be,[y("div",Ve,[we,y("div",he,[u(o,{type:"is-light",class:"download-button",onClick:e[1]||(e[1]=i=>a())},{default:r(()=>[m(" JSON ")]),_:1}),u(o,{type:"is-light",class:"download-button",onClick:e[2]||(e[2]=i=>U())},{default:r(()=>[m(" JSON (variant) ")]),_:1}),u(o,{type:"is-light",class:"download-button",onClick:e[3]||(e[3]=i=>$())},{default:r(()=>[m(" CSV (rows)")]),_:1}),u(o,{type:"is-light",class:"download-button",onClick:e[4]||(e[4]=i=>I())},{default:r(()=>[m(" CSV (table) ")]),_:1})])])])]),_:1},8,["modelValue"])]),_:1})]),_:3})])}}}),ze=K(Se,[["__scopeId","data-v-d3ee019f"]]),ke={class:"section"},Ce={class:"container"},Ue=y("h1",{class:"title"},"Organizations contributions",-1),$e=y("p",null,[y("strong",null,"Repositories?")],-1),Oe=y("p",null,[y("strong",null,"Organizations:")],-1),xe=y("div",{class:"mr-2"},null,-1),Ae={key:0,class:"mt-2"},De=y("p",null,[y("strong",null,"Note:"),m(" Contributors who have contributed to multiple repositories will be counted once per repository. ")],-1),Me={class:"section"},Pe=F({__name:"commits",setup(g){const s=ae(),x=le(),V=O(["chromium"]);s.query.repositories&&(V.value=s.query.repositories.split(","));const w=O(["Google"]);s.query.organizations&&(s.query.organizations==="all"?w.value=L:w.value=s.query.organizations.split(","));const p=O("yearly");s.query.grouping&&(p.value=s.query.grouping);const S=O("repositories");s.query.colors&&(S.value=s.query.colors);const b=O("author");s.query.kind&&(b.value=s.query.kind);const k=O("commit");s.query.metric&&(k.value=s.query.metric);const C=O("bar");s.query.chart&&(C.value=s.query.chart);const D=O([new Date("2000-01-01"),new Date]);s.query.dates&&(D.value=s.query.dates.split(",").map(U=>new Date(U)));const h=O(s.query.others===null),f=O(s.query.percent===null?"percent":"absolute");return Q([V,w,p,S,b,k,C,D,h,f],()=>{x.push({query:{repositories:V.value.join(","),organizations:w.value.length===L.length?"all":w.value.join(","),grouping:p.value,colors:S.value,kind:b.value,metric:k.value,chart:C.value,dates:D.value.map(U=>U.toISOString().split("T")[0]).join(","),others:h.value?null:void 0,percent:f.value==="percent"?null:void 0}})}),(U,a)=>{const $=X,I=Y,B=M("b-checkbox"),t=M("b-tooltip"),e=ye,n=M("b-radio-button"),l=M("b-field"),o=ze,c=M("b-notification"),v=ue;return A(),R("div",null,[u($),y("section",ke,[y("div",Ce,[Ue,$e,u(I,{modelValue:d(V),"onUpdate:modelValue":a[0]||(a[0]=i=>_(V)?V.value=i:null),size:"small",allowMultiple:!0,allowAll:!0},null,8,["modelValue"]),Oe,u(e,{modelValue:d(w),"onUpdate:modelValue":a[2]||(a[2]=i=>_(w)?w.value=i:null),size:"small",allowMultiple:!0,allowAll:!0,repositories:d(V)},{default:r(()=>[y("div",null,[u(t,{multilined:"",label:`Include all the organizations that are not in the
              list as 'Others'`,position:"is-bottom"},{default:r(()=>[u(B,{size:"small",name:"others",modelValue:d(h),"onUpdate:modelValue":a[1]||(a[1]=i=>_(h)?h.value=i:null)},{default:r(()=>[m(" Others ")]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["modelValue","repositories"]),u(l,{grouped:"","group-multiline":""},{default:r(()=>[u(l,{label:"As:"},{default:r(()=>[u(n,{name:"kind",modelValue:d(b),"onUpdate:modelValue":a[3]||(a[3]=i=>_(b)?b.value=i:null),"native-value":"author"},{default:r(()=>[m(" author ")]),_:1},8,["modelValue"]),u(n,{name:"kind",modelValue:d(b),"onUpdate:modelValue":a[4]||(a[4]=i=>_(b)?b.value=i:null),"native-value":"review"},{default:r(()=>[m(" reviewer ")]),_:1},8,["modelValue"]),u(n,{name:"kind",modelValue:d(b),"onUpdate:modelValue":a[5]||(a[5]=i=>_(b)?b.value=i:null),"native-value":"both"},{default:r(()=>[m(" both ")]),_:1},8,["modelValue"])]),_:1}),u(l,{label:"Grouping:"},{default:r(()=>[u(n,{name:"grouping",modelValue:d(p),"onUpdate:modelValue":a[6]||(a[6]=i=>_(p)?p.value=i:null),"native-value":"forever"},{default:r(()=>[m(" Forever ")]),_:1},8,["modelValue"]),u(n,{name:"grouping",modelValue:d(p),"onUpdate:modelValue":a[7]||(a[7]=i=>_(p)?p.value=i:null),"native-value":"decennial"},{default:r(()=>[m(" Decennial ")]),_:1},8,["modelValue"]),u(n,{name:"grouping",modelValue:d(p),"onUpdate:modelValue":a[8]||(a[8]=i=>_(p)?p.value=i:null),"native-value":"yearly"},{default:r(()=>[m(" Yearly ")]),_:1},8,["modelValue"]),u(n,{name:"grouping",modelValue:d(p),"onUpdate:modelValue":a[9]||(a[9]=i=>_(p)?p.value=i:null),"native-value":"quarterly"},{default:r(()=>[m(" Quarterly ")]),_:1},8,["modelValue"]),u(n,{name:"grouping",modelValue:d(p),"onUpdate:modelValue":a[10]||(a[10]=i=>_(p)?p.value=i:null),"native-value":"monthly"},{default:r(()=>[m(" Monthly ")]),_:1},8,["modelValue"])]),_:1}),u(l,{label:"Colors:"},{default:r(()=>[u(n,{name:"colors",modelValue:d(S),"onUpdate:modelValue":a[11]||(a[11]=i=>_(S)?S.value=i:null),"native-value":"repositories"},{default:r(()=>[m(" Repositories ")]),_:1},8,["modelValue"]),u(n,{name:"colors",modelValue:d(S),"onUpdate:modelValue":a[12]||(a[12]=i=>_(S)?S.value=i:null),"native-value":"organizations"},{default:r(()=>[m(" Organizations ")]),_:1},8,["modelValue"])]),_:1}),u(l,{label:"Chart:"},{default:r(()=>[u(n,{name:"chart",modelValue:d(C),"onUpdate:modelValue":a[13]||(a[13]=i=>_(C)?C.value=i:null),"native-value":"line"},{default:r(()=>[m(" Line ")]),_:1},8,["modelValue"]),u(n,{name:"chart",modelValue:d(C),"onUpdate:modelValue":a[14]||(a[14]=i=>_(C)?C.value=i:null),"native-value":"bar"},{default:r(()=>[m(" Bar ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(o,{repositories:d(V),grouping:d(p),colors:d(S),kind:d(b),metric:d(k),organizations:d(w),chart:d(C),dates:d(D),others:d(h),percent:d(f)==="percent"},{default:r(()=>[u(l,{class:"has-addons"},{default:r(()=>[u(n,{size:"small",name:"metric",modelValue:d(k),"onUpdate:modelValue":a[15]||(a[15]=i=>_(k)?k.value=i:null),"native-value":"commit"},{default:r(()=>[u(t,{label:"Number of commits"},{default:r(()=>[m(" ⚙️ ")]),_:1})]),_:1},8,["modelValue"]),u(n,{size:"small",name:"metric",modelValue:d(k),"onUpdate:modelValue":a[16]||(a[16]=i=>_(k)?k.value=i:null),"native-value":"contributor"},{default:r(()=>[u(t,{label:"Number of contributors"},{default:r(()=>[m(" 🧍 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),xe,u(l,{class:"has-addons"},{default:r(()=>[u(n,{size:"small",name:"percent",modelValue:d(f),"onUpdate:modelValue":a[17]||(a[17]=i=>_(f)?f.value=i:null),"native-value":"absolute"},{default:r(()=>[m(" Absolute ")]),_:1},8,["modelValue"]),u(n,{size:"small",name:"percent",modelValue:d(f),"onUpdate:modelValue":a[18]||(a[18]=i=>_(f)?f.value=i:null),"native-value":"percent"},{default:r(()=>[m(" Percent ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["repositories","grouping","colors","kind","metric","organizations","chart","dates","others","percent"]),d(k)=="contributor"?(A(),R("div",Ae,[d(V).length>1?(A(),q(c,{key:0,type:"is-warning"},{default:r(()=>[De]),_:1})):N("",!0)])):N("",!0)])]),y("section",Me,[u(l,{expanded:""},{default:r(()=>[u(v,{modelValue:d(D),"onUpdate:modelValue":a[19]||(a[19]=i=>_(D)?D.value=i:null)},null,8,["modelValue"])]),_:1})])])}}});export{Pe as default};
