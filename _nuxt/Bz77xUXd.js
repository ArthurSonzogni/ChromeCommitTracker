import{_ as Y}from"./BgwZxOQs.js";import{_ as ee}from"./B2tdp_o7.js";import{g as G,i as A,q as te,r as z,o as u,c as S,a as n,b as a,A as oe,x as r,j as T,w as o,d as i,t as c,z as $,F as H,k as L,T as ae,y as O,B as ne,p as J,e as K,l as se,n as re,C as I,v as le,s as M}from"./BYXYRwLn.js";import{_ as Q}from"./DlAUqK2U.js";import{_ as ie}from"./C2qxPpFt.js";import"./nBtS1XGq.js";import"./D7zcYHcO.js";import"./D2nGpDRe.js";const ce=l=>(J("data-v-b159b297"),l=l(),K(),l),ue={key:0},de={key:0},he=ce(()=>n("span",{class:"m-3"},null,-1)),_e=G({__name:"FuzzerHierarchy",props:{name:{type:String},authors:{type:Array},children:{type:Array},collapsed_default:{type:Boolean,default:!0}},setup(l){const k=l;let y=A(k.collapsed_default),h=te(()=>{if(!k.authors)return[];let d=new Map;for(let _ of k.authors){const w=d.get(_)||0;d.set(_,w+1)}return Array.from(d).sort((_,w)=>w[1]-_[1]).map(_=>`${_[0]} (x${_[1]})`)});return(d,_)=>{const w=z("b-icon"),D=z("b-tag"),C=W;return u(),S("div",null,[n("div",{onClick:_[0]||(_[0]=m=>O(y)?y.value=!r(y):y=!r(y)),class:"clickable_area"},[l.children&&l.children.length?(u(),S("span",ue,[a(w,{icon:"chevron-right",style:oe({transform:"rotate("+(r(y)?0:90)+"deg)",transition:"transform 0.2s"})},null,8,["style"])])):(u(),T(w,{key:1,icon:"empty"})),l.children.length?(u(),T(D,{key:2,type:"is-primary",style:{width:"4em","margin-right":"1em"}},{default:o(()=>[i(c(l.authors.length),1)]),_:1})):$("",!0),i(" "+c(l.name)+" ",1),a(ae,{name:"fade"},{default:o(()=>[r(h)&&r(h).length&&(r(y)||l.children.length==0)?(u(),S("span",de,[he,(u(!0),S(H,null,L(r(h).slice(0,5),m=>(u(),T(D,{type:"is-warning",class:"mr-1 mb-1"},{default:o(()=>[i(c(m),1)]),_:2},1024))),256)),r(h).length>5?(u(),T(D,{key:0,type:"is-warning",class:"mr-1 mb-1"},{default:o(()=>[i("...")]),_:1})):$("",!0)])):$("",!0)]),_:1})]),a(ne,{name:"fade"},{default:o(()=>[l.children&&!r(y)?(u(!0),S(H,{key:0},L(l.children,m=>(u(),T(C,{class:"recursive-list",key:m.name,name:m.name,authors:m.authors,children:m.children},null,8,["name","authors","children"]))),128)):$("",!0)]),_:1})])}}}),W=Q(_e,[["__scopeId","data-v-b159b297"]]),B=l=>(J("data-v-6f15b2a3"),l=l(),K(),l),me={class:"section"},fe={class:"container"},pe={class:"title"},ye={class:"container"},be={class:"section"},we={class:"container"},ve=B(()=>n("h2",{class:"title"},"Fuzzers",-1)),ge=["href"],ze=["href"],Te=["href"],ke=["href"],xe={class:"section"},Se={class:"container"},Fe=B(()=>n("h2",{class:"title"},"Hierarchy",-1)),Ve={class:"section"},De={class:"container"},qe=B(()=>n("h2",{class:"title"},"Leaderboard",-1)),je={class:"leaderboard-authors"},Ze={key:0},$e=B(()=>n("div",{class:"flex-end"},null,-1)),Ce={class:"section sticky bottom"},Ee=G({__name:"fuzz-test",setup(l){const k=se(),y=re(),h=A([new Date("2000-01-01"),new Date]);k.query.dates&&(h.value=k.query.dates.split(",").map(j=>new Date(j)));const d=A(["fuzzer_test","FUZZ_TEST"]);k.query.type&&(d.value=k.query.type.split(","));const _=I([]),w=I([]),D=I([]),C=A(0),m=I({name:"root",authors:[],children:[]}),N=()=>{const j={dates:h.value.map(s=>s.toISOString().split("T")[0]).join(","),type:d.value.join(",")};y.push({query:j})},P=async function(){var E;let s=await(await fetch("/fuzz-test/data.json")).json();s=s.filter(t=>{const e=new Date(t.date);return e>=h.value[0]&&e<=h.value[1]}),console.log(d.value),s=s.filter(t=>d.value.includes(t.type)),s.sort((t,e)=>new Date(e.date)-new Date(t.date)),s.forEach(t=>{t.date=new Date(t.date).toISOString().split("T")[0]}),s.forEach(t=>{t.author=t.author.split("@")[0]}),await new Promise(t=>setTimeout(t,1)),_.value=structuredClone(s),await new Promise(t=>setTimeout(t,1)),s.reverse();const F={};let v={};s.forEach(t=>{var e,b;v[e=t.type]||(v[e]=0),v[t.type]++,F[b=t.type]||(F[b]=[]),F[t.type].push({x:new Date(t.date),y:v[t.type]})}),D.value=Object.entries(F).map(([t,e])=>({label:t,extra_label:" = "+v[t],values:e})),C.value=Object.values(v).reduce((t,e)=>t+e,0);const V={};for(const t of s)V[E=t.author]||(V[E]=0),V[t.author]++;const x={};for(const[t,e]of Object.entries(V))x[e]||(x[e]=[]),x[e].push(t);const f=Object.entries(x).map(([t,e])=>({count:t,authors:e})).sort((t,e)=>e.count-t.count),p=(t,e)=>{f[t]&&(f[t].icon=e)};p(0,"ðŸ¥‡"),p(1,"ðŸ¥ˆ"),p(2,"ðŸ¥‰"),await new Promise(t=>setTimeout(t,1)),w.value=f,await new Promise(t=>setTimeout(t,1));const g={name:"root",authors:[],children:[]};for(const t of s){let e=g;const b=t.file.split("/");b.push("   "+t.suite_name),e.authors.push(t.author);for(const R of b){let U=e.children.find(X=>X.name==R);U||(U={name:R,children:[],authors:[]},e.children.push(U)),e=U,e.authors.push(t.author)}}console.log(g);const q=t=>{for(const e of t.children)q(e);if(t.children.length==1&&t.children[0].children.length){const e=t.children[0];t.name+="/"+e.name,t.children=e.children,t.authors=e.authors}};q(g);const Z=t=>{t.children.sort((e,b)=>e.name.localeCompare(b.name));for(const e of t.children)Z(e)};Z(g),m.value=g};return le(()=>{N(),P()}),M(h,()=>{N(),P()}),M(d,()=>{N(),P()}),(j,s)=>{const F=Y,v=z("b-icon"),V=ee,x=z("b-checkbox-button"),f=z("b-field"),p=z("b-table-column"),g=z("router-link"),q=z("b-tag"),Z=z("b-table"),E=W,t=ie;return u(),S("div",null,[a(F),n("section",me,[n("div",fe,[n("h1",pe,[a(v,{icon:"strike"}),i(c(r(C))+" fuzzers in chromium",1)]),a(V,{data:r(D)},null,8,["data"]),n("div",ye,[a(f,null,{default:o(()=>[a(x,{modelValue:r(d),"onUpdate:modelValue":s[0]||(s[0]=e=>O(d)?d.value=e:null),"native-value":"fuzzer_test"},{default:o(()=>[i("Fuzz target")]),_:1},8,["modelValue"]),a(x,{modelValue:r(d),"onUpdate:modelValue":s[1]||(s[1]=e=>O(d)?d.value=e:null),"native-value":"FUZZ_TEST"},{default:o(()=>[i("FUZZ_TEST")]),_:1},8,["modelValue"])]),_:1})])])]),n("section",be,[n("div",we,[ve,a(Z,{data:r(_),hoverable:"",paginated:!0,"pagination-simple":!0,"pagination-position":"top","pagination-rounded":!0,"per-page":15,striped:"",detailed:""},{detail:o(e=>[a(f,{label:"Date",horizontal:""},{default:o(()=>[i(c(e.row.date),1)]),_:2},1024),a(f,{label:"Author",horizontal:""},{default:o(()=>[a(g,{to:{name:"individuals",query:{developers:e.row.author,repositories:"chromium"}}},{default:o(()=>[i(c(e.row.author),1)]),_:2},1032,["to"])]),_:2},1024),a(f,{label:"File",horizontal:""},{default:o(()=>[n("a",{href:"https://cs.chromium.org/chromium/src/"+e.row.file+"?l="+e.row.line},c(e.row.file),9,Te)]),_:2},1024),a(f,{label:"Line",horizontal:""},{default:o(()=>[i(c(e.row.line),1)]),_:2},1024),a(f,{label:"Type",horizontal:""},{default:o(()=>[i(c(e.row.type),1)]),_:2},1024),a(f,{label:"Sha",horizontal:""},{default:o(()=>[n("a",{href:"https://chromium-review.googlesource.com/q/"+e.row.sha},c(e.row.sha),9,ke)]),_:2},1024)]),default:o(()=>[a(p,{field:"date",label:"Date",sortable:""},{default:o(e=>[i(c(e.row.date),1)]),_:1}),a(p,{field:"author",label:"Author",sortable:""},{default:o(e=>[a(g,{to:{name:"individuals",query:{developers:e.row.author,repositories:"chromium"}}},{default:o(()=>[i(c(e.row.author),1)]),_:2},1032,["to"])]),_:1}),a(p,{field:"suite_name",label:"Name",sortable:""},{default:o(e=>[n("a",{href:"https://cs.chromium.org/chromium/src/"+e.row.file+"?l="+e.row.line},c(e.row.suite_name),9,ge)]),_:1}),a(p,{field:"sha",label:"Patch"},{default:o(e=>[n("a",{href:"https://chromium-review.googlesource.com/q/"+e.row.sha}," Open ",8,ze)]),_:1}),a(p,{field:"type",label:"Type",sortable:""},{default:o(e=>[e.row.type=="fuzzer_test"?(u(),T(q,{key:0,type:"is-info"},{default:o(()=>[i(" fuzz target ")]),_:1})):e.row.type=="FUZZ_TEST"?(u(),T(q,{key:1,type:"is-danger"},{default:o(()=>[i(" FUZZ_TEST ")]),_:1})):(u(),T(q,{key:2,type:"is-danger"},{default:o(()=>[i(c(e.row.type),1)]),_:2},1024))]),_:1})]),_:1},8,["data"])])]),n("section",xe,[n("div",Se,[Fe,a(E,{name:r(m).name,children:r(m).children,authors:r(m).authors,collapsed_default:!1},null,8,["name","children","authors"])])]),n("section",Ve,[n("div",De,[qe,a(Z,{data:r(w),hoverable:"",striped:""},{default:o(()=>[a(p,{field:"count",label:"Fuzzers"},{default:o(e=>[i(c(e.row.count),1)]),_:1}),a(p,{field:"author",label:"Authors"},{default:o(e=>[n("div",je,[(u(!0),S(H,null,L(e.row.authors,b=>(u(),T(g,{class:"leaderboard-author",to:{name:"individuals",query:{developers:b,repositories:"chromium"}}},{default:o(()=>[e.row.icon?(u(),S("span",Ze,c(e.row.icon),1)):$("",!0),i(" "+c(b),1)]),_:2},1032,["to"]))),256)),$e])]),_:1})]),_:1},8,["data"])])]),n("section",Ce,[a(f,{expanded:""},{default:o(()=>[a(t,{modelValue:r(h),"onUpdate:modelValue":s[2]||(s[2]=e=>O(h)?h.value=e:null)},null,8,["modelValue"])]),_:1})])])}}}),Le=Q(Ee,[["__scopeId","data-v-6f15b2a3"]]);export{Le as default};
