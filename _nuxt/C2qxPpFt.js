import{a as $}from"./nBtS1XGq.js";import{g as q,m as A,h as G,i as x,s as j,r as k,o as m,c as w,x as l,j as C,w as i,b as d,d as b,F as V,k as F,t as E,z as I,y as H}from"./BYXYRwLn.js";import{_ as J}from"./DlAUqK2U.js";const K={class:"timeline"},L=3,O=q({__name:"Timeline",props:A({minDate:{default:new Date("2000-01"),type:Date},maxDate:{default:new Date,type:Date}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(z){const p=z,Q=n=>$(p.minDate,p.maxDate)(Math.pow(n,1/L)),T=n=>{const e=p.minDate.getTime(),s=p.maxDate.getTime(),u=(n.getTime()-e)/(s-e);return Math.pow(u,L)},f=G(z,"modelValue"),t=x(f.value.map(T)),M=x(!1),B=x(p.minDate),N=x(p.maxDate),Y=new Date,D=x(new Date(Y.getFullYear(),Y.getMonth()-4).getFullYear());let y=!1,h=!1;j(t,()=>{h||y||(h=!0,f.value=t.value.map(Q),setTimeout(()=>{h=!1},1))}),j(f,()=>{h||y||(y=!0,t.value=f.value.map(T),setTimeout(()=>{y=!1},1))});const S=()=>{M.value=!M.value},R=n=>{const e=Q(n);return e.getFullYear()+"-"+(e.getMonth()+1)},o=n=>T(n),v=n=>{const e=Math.floor(n/4),s=n%4,r=new Date(e,(s-1)*3),u=new Date(e,(s-1)*3+3);return t.value[0]<=o(r)&&t.value[1]>=o(u)},U=(n,e)=>{const s=new Date(n,(e-1)*3),r=new Date(n,(e-1)*3+3);if(!v(4*n+e)){t.value=[Math.min(t.value[0],o(s)),Math.max(t.value[1],o(r))];return}const u=4*n+e-1,_=4*n+e+1;if(v(u)&&v(_)){t.value=[o(s),o(r)];return}if(v(u)){const g=Math.floor(u/4),a=u%4,c=new Date(g,(a-1)*3+3);t.value=[t.value[0],o(c)];return}if(v(_)){const g=Math.floor(_/4),a=_%4,c=new Date(g,(a-1)*3);t.value=[o(c),t.value[1]];return}t.value=[o(s),o(r)]};return(n,e)=>{const s=k("b-button"),r=k("b-field"),u=k("b-datepicker"),_=k("b-slider-tick"),g=k("b-slider");return m(),w("div",K,[l(M)?(m(),C(r,{key:0,grouped:""},{default:i(()=>[d(s,{onClick:S,class:"mr-5",size:"is-small"},{default:i(()=>[b(" - ")]),_:1}),(m(!0),w(V,null,F([l(D)-1,l(D)],a=>(m(),C(r,{key:a,label:a+"-Quarters"},{default:i(()=>[(m(),w(V,null,F(4,c=>d(s,{key:c,onClick:P=>U(a,c),inverted:!v(4*a+c),type:"is-primary",class:"mr-1",rounded:""},{default:i(()=>[b(E("Q"+c),1)]),_:2},1032,["onClick","inverted"])),64))]),_:2},1032,["label"]))),128)),d(r,{label:"Min"},{default:i(()=>[d(u,{position:"is-top-left",value:f.value[0],onInput:e[0]||(e[0]=a=>l(t)[0]=o(a)),"min-date":l(B),"max-date":l(N)},null,8,["value","min-date","max-date"])]),_:1}),d(r,{label:"Max"},{default:i(()=>[d(u,{position:"is-top-left",value:f.value[1],onInput:e[1]||(e[1]=a=>l(t)[1]=o(a)),"min-date":l(B),"max-date":l(N)},null,8,["value","min-date","max-date"])]),_:1})]),_:1})):I("",!0),l(M)?I("",!0):(m(),C(r,{key:1,grouped:""},{default:i(()=>[d(s,{onClick:S,class:"mr-5",size:"is-small"},{default:i(()=>[b(" + ")]),_:1}),d(g,{expanded:"",modelValue:l(t),"onUpdate:modelValue":e[2]||(e[2]=a=>H(t)?t.value=a:null),min:0,max:1,step:.001,"custom-formatter":R,rounded:"","tooltip-always":"",lazy:""},{default:i(()=>[(m(),w(V,null,F([0,1,2,3,4,6,8,10,12,14,16,18,20],a=>(m(),w(V,{key:a},[o(new Date(l(D)-a+"-01-01"))>=.1?(m(),C(_,{key:0,value:o(new Date(l(D)-a+"-01-01"))},{default:i(()=>[b(E(l(D)-a),1)]),_:2},1032,["value"])):I("",!0)],64))),64)),d(_,{value:1},{default:i(()=>[b("today")]),_:1})]),_:1},8,["modelValue"])]),_:1}))])}}}),ee=J(O,[["__scopeId","data-v-9487ea3f"]]);export{ee as _};
