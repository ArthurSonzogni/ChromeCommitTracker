import{_ as q}from"./BgwZxOQs.js";import{_ as B}from"./Dr1fThoD.js";import{g as C,l as L,n as S,i as m,s as P,v as T,o as U,c as $,b as N,a as s,x as h,y as D,d as R,t as V}from"./BYXYRwLn.js";import{s as k,i as E}from"./nBtS1XGq.js";import{b as O}from"./BxPoHLz2.js";import"./DlAUqK2U.js";import"./CTRyl4Lp.js";const z={class:"section"},F={class:"container"},G=s("h1",{class:"title"},"Usernames length distribution",-1),H=s("strong",null,"Repositories:",-1),I=s("div",{class:"line"},[s("div",{class:"left"},[s("strong",null,"Length")]),s("div",{class:"right"},[s("strong",null,"#")])],-1),se=C({__name:"usernames",setup(J){const _=L(),A=S(),n=m(["chromium"]);_.query.repositories&&(n.value=_.query.repositories.split(","));const f=m(0),a=m([]),g=m(null),x=async()=>{var b,j;A.push({query:{repositories:n.value.join(",")}});const y=await Promise.all(n.value.map(e=>fetch(`/data/${e}/usernames.json`))),u=await Promise.all(y.map(e=>e.json())),i=[...new Set(u.flat())];f.value=i.length,a.value=[];for(const e of i){const t=e.length;(b=a.value)[t]||(b[t]=0),a.value[t]++}for(let e=0;e<a.value.length;++e)(j=a.value)[e]||(j[e]=0);const v=Math.max(...a.value),d=e=>{e.transition().duration(t=>450).ease(O).style("width",t=>2*(t!=0)+79*t/v+"%")},w=e=>{e.transition().duration(t=>450).textTween((t,o,r)=>{const l=k(r[o]).text(),c=E(l,t);return p=>Math.round(c(p))})};k(g.value).selectAll(".group").data(a.value).join(e=>{const t=e.append("div");t.classed("group",!0);const o=t.append("div");o.classed("line",!0);const r=o.append("div");r.classed("left",!0),r.text((K,M)=>M);const l=o.append("div");l.classed("center",!0),l.style("width",0),d(l);const c=o.append("div");c.classed("right",!0),c.text(0),w(c),l.on("click",function(){this.parentNode.parentNode.lastChild.classList.toggle("hidden")});const p=t.append("ul");return p.classed("usernameList",!0),p.classed("hidden",!0),t},e=>(e.select("ul").classed("hidden",!0),d(e.select(".center")),w(e.select(".right")),e),e=>e.remove()).select("ul").selectAll("li").data((e,t)=>i.filter(o=>o.length===t),e=>e).join(e=>{const t=e.append("li"),o=t.append("a");return o.text(r=>r),o.attr("href",r=>`/individuals?developers=${r}`),t},e=>e,e=>e.remove())};return P(n,x),T(x),(y,u)=>{const i=q,v=B;return U(),$("div",null,[N(i),s("section",z,[s("div",F,[G,H,N(v,{modelValue:h(n),"onUpdate:modelValue":u[0]||(u[0]=d=>D(n)?n.value=d:null),size:"medium",allowMultiple:!0,allowAll:!0},null,8,["modelValue"]),s("p",null,[R(" Approximatively "),s("strong",null,V(h(f)),1),R(" developers contributed to "+V(h(n).join(", "))+" repository. ",1)]),I,s("div",{ref_key:"histogram",ref:g},null,512)])])])}}});export{se as default};
