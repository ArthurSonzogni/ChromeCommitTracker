import{_ as W}from"./BgwZxOQs.js";import{_ as O}from"./Dr1fThoD.js";import{_ as Q}from"./c964EoYH.js";import{a as G,_ as J,b as K}from"./CE4rTbJF.js";import{g as F,C as z,i as B,s as D,r as U,o as R,c as L,b as s,w as r,x as t,y as x,d as M,a as u,Q as X,l as Z,n as ee,q as te,j as oe,z as se,p as le,e as ae}from"./BYXYRwLn.js";import{f as H}from"./D2nGpDRe.js";import{_ as ne}from"./C2qxPpFt.js";import{_ as ie}from"./DlAUqK2U.js";import"./CTRyl4Lp.js";import"./nBtS1XGq.js";import"./B2tdp_o7.js";import"./D7zcYHcO.js";const de={align:"center"},re=F({__name:"TimelineCount",props:{repositories:{type:Array[String],default:()=>["chromium"]},developers:{type:Array},dates:{type:Array[Date]},author:{type:Boolean},review:{type:Boolean}},setup(S){const{$chromiumDataAll:_}=X(),f=S,v=z([]),c=z([]),o=z([]),h=B(!1),b=async()=>{const T=[];for(const y of v.value){let l=y.commits.filter(e=>{const d=new Date(e.date);return d>=f.dates[0]&&d<=f.dates[1]});f.author||(l=l.filter(e=>e.kind!="author")),f.review||(l=l.filter(e=>e.kind!="review"));const n=[];n.push({field:"developer",label:"Developer",sortable:!0,sticky:!0,visible:!0,numeric:!1,headerClass:"table-style-header"}),n.push({field:"commit",label:"Σ(Commits)",sortable:!0,visible:!0,numeric:!0,cellClass:"table-style-commits",headerClass:"table-style-header"});const w=[];w.push(["",e=>`Σ(${e})`]),h.value&&(w.push(["_mean",e=>`Mean(${e})`]),w.push(["_median",e=>`Median(${e})`]),w.push(["_min",e=>`Min(${e})`]),w.push(["_max",e=>`Max(${e})`]));for(const e of["Additions","Deletions","Net","Modified","Files"])for(const d of w){const N=`${e.toLowerCase()}${d[0]}`;n.push({field:N,label:d[1](e),sortable:!0,visible:!0,numeric:!0,cellClass:`table-style-${e.toLowerCase()}`,headerClass:"table-style-header"})}o.value=n;const k=l.map(e=>e.additions).sort((e,d)=>e-d),g=l.map(e=>e.deletions).sort((e,d)=>e-d),p=l.map(e=>e.additions-e.deletions).sort((e,d)=>e-d),V=l.map(e=>e.additions+e.deletions).sort((e,d)=>e-d),C=l.map(e=>e.files).sort((e,d)=>e-d),a=H(",d"),q=H(".2f"),$=e=>e.reduce((d,N)=>d+N,0),I=$(k),P=$(g),A=$(p),i=$(V),j=$(C),Y={developer:y.developer,commit:H(",")(l.length),additions:a(I),additions_mean:q(I/l.length),additions_median:a(k[Math.floor(k.length/2)]),additions_min:a(k[0]),additions_max:a(k[k.length-1]),deletions:a(P),deletions_mean:q(P/l.length),deletions_median:a(g[Math.floor(g.length/2)]),deletions_min:a(g[0]),deletions_max:a(g[g.length-1]),net:a(A),net_mean:q(A/l.length),net_median:a(p[Math.floor(p.length/2)]),net_min:a(p[0]),net_max:a(p[p.length-1]),modified:a(i),modified_mean:q(i/l.length),modified_median:a(V[Math.floor(V.length/2)]),modified_min:a(V[0]),modified_max:a(V[V.length-1]),files:a(j),files_mean:q(j/l.length),files_median:a(C[Math.floor(C.length/2)]),files_min:a(C[0]),files_max:a(C[C.length-1])};T.push(Y)}c.value=T},m=async()=>{const T=await _(f.repositories[0],f.developers);v.value=T.map(y=>({developer:y.developer,commits:y.data})),b()};return m(),D(()=>f.repositories,m),D(()=>f.developers,m),D(()=>f.dates,m),D(()=>f.author,b),D(()=>f.review,b),D(h,b),(T,y)=>{const l=U("b-switch"),n=U("b-field"),w=U("b-table");return R(),L("div",null,[s(n,null,{default:r(()=>[s(l,{modelValue:t(h),"onUpdate:modelValue":y[0]||(y[0]=k=>x(h)?h.value=k:null)},{default:r(()=>[M("Full")]),_:1},8,["modelValue"])]),_:1}),u("div",de,[s(w,{data:t(c),columns:t(o),"sticky-header":"",striped:"",hoverable:""},null,8,["data","columns"])])])}}}),E=S=>(le("data-v-201c6fe9"),S=S(),ae(),S),ue={class:"section sticky top"},ce={class:"section"},me={class:"container"},pe=E(()=>u("h2",{class:"title"},"1. Timeline",-1)),_e={class:"section"},fe={class:"container"},ve=E(()=>u("h2",{class:"title"},"2. Timeline wrapped",-1)),he={class:"section"},be={class:"container"},ye=E(()=>u("h2",{class:"title"},"3. Peers",-1)),we={class:"section"},ke={class:"container"},Ve=E(()=>u("h2",{class:"title"},"4. Counts",-1)),xe={class:"section sticky bottom"},ge=F({__name:"individuals",setup(S){const _=Z(),f=ee(),v=B([new Date("2000-01-01"),new Date]);_.query.dates&&(v.value=_.query.dates.split(",").map(l=>new Date(l)));const c=B([]);_.query.developers&&(c.value=_.query.developers.split(",")),te(()=>c.value);const o=B(["author","review"]);_.query.options&&(o.value=_.query.options.split(","));const h=B(0);_.query.hourlyParam&&(h.value=parseInt(_.query.hourlyParam));const b=B(100);_.query.wrappedBuckets&&(b.value=parseInt(_.query.wrappedBuckets));const m=B(["chromium"]);_.query.repositories&&(m.value=_.query.repositories.split(",")),D([v,c,o,h,b,m],()=>{f.push({query:{developers:c.value.join(","),options:o.value.join(","),hourlyParam:h.value,wrappedBuckets:b.value,repositories:m.value.join(","),dates:v.value.map(l=>l.toISOString().split("T")[0]).join(",")}})});const y=()=>{const l=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);document.documentElement.dataset.scrolltop=window.scrollY>100?"1":"0",document.documentElement.dataset.scrollbottom=l-window.scrollY>1e3?"1":"0"};return y(),document.addEventListener("scroll",y,{passive:!0}),(l,n)=>{const w=W,k=O,g=Q,p=U("b-field"),V=U("b-checkbox-button"),C=G,a=U("b-slider-tick"),q=U("b-slider"),$=J,I=K,P=re,A=ne;return R(),L("div",null,[s(w),u("div",null,[u("section",ue,[s(k,{modelValue:t(m),"onUpdate:modelValue":n[0]||(n[0]=i=>x(m)?m.value=i:null),size:"is-small"},null,8,["modelValue"]),s(p,{grouped:""},{default:r(()=>[s(p,{expanded:""},{default:r(()=>[s(g,{modelValue:t(c),"onUpdate:modelValue":n[1]||(n[1]=i=>x(c)?c.value=i:null)},null,8,["modelValue"])]),_:1}),s(p,null,{default:r(()=>[s(V,{modelValue:t(o),"onUpdate:modelValue":n[2]||(n[2]=i=>x(o)?o.value=i:null),"native-value":"author",size:"is-medium"},{default:r(()=>[M(" Author ")]),_:1},8,["modelValue"]),s(V,{modelValue:t(o),"onUpdate:modelValue":n[3]||(n[3]=i=>x(o)?o.value=i:null),"native-value":"review",size:"is-medium"},{default:r(()=>[M(" Review ")]),_:1},8,["modelValue"])]),_:1}),s(p,null,{default:r(()=>[t(c).length>=2?(R(),oe(V,{key:0,modelValue:t(o),"onUpdate:modelValue":n[4]||(n[4]=i=>x(o)?o.value=i:null),"native-value":"stacked",size:"is-medium"},{default:r(()=>[M(" Stacked ")]),_:1},8,["modelValue"])):se("",!0)]),_:1})]),_:1})]),u("section",ce,[u("div",me,[pe,s(C,{repositories:t(m),developers:t(c),dates:t(v),author:t(o).includes("author"),review:t(o).includes("review"),stacked:t(o).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])]),u("section",_e,[u("div",fe,[ve,s(p,{grouped:""},{default:r(()=>[s(p,{label:"Modulo",expanded:"","label-position":"on-border"},{default:r(()=>[s(q,{modelValue:t(h),"onUpdate:modelValue":n[5]||(n[5]=i=>x(h)?h.value=i:null),min:0,max:2,"aria-label":"Fan",tooltip:!1,rounded:""},{default:r(()=>[s(a,{value:0},{default:r(()=>[M("Day")]),_:1}),s(a,{value:1},{default:r(()=>[M("Week")]),_:1}),s(a,{value:2},{default:r(()=>[M("Year")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(p,{label:"Buckets: "+t(b),expanded:"","label-position":"on-border"},{default:r(()=>[s(q,{modelValue:t(b),"onUpdate:modelValue":n[6]||(n[6]=i=>x(b)?b.value=i:null),min:1,max:500,"aria-label":"Buckets",lazy:"",rounded:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),s($,{repositories:t(m),developers:t(c),dates:t(v),author:t(o).includes("author"),review:t(o).includes("review"),stacked:t(o).includes("stacked"),hourlyParam:t(h),buckets:t(b)},null,8,["repositories","developers","dates","author","review","stacked","hourlyParam","buckets"])])]),u("section",he,[u("div",be,[ye,s(I,{repositories:t(m),developers:t(c),dates:t(v),author:t(o).includes("author"),review:t(o).includes("review"),stacked:t(o).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])]),u("section",we,[u("div",ke,[Ve,s(P,{repositories:t(m),developers:t(c),dates:t(v),author:t(o).includes("author"),review:t(o).includes("review")},null,8,["repositories","developers","dates","author","review"])])]),u("section",xe,[s(p,{expanded:""},{default:r(()=>[s(A,{modelValue:t(v),"onUpdate:modelValue":n[7]||(n[7]=i=>x(v)?v.value=i:null)},null,8,["modelValue"])]),_:1})])])])}}}),Ee=ie(ge,[["__scopeId","data-v-201c6fe9"]]);export{Ee as default};
